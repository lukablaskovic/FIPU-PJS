# [1] JavaScript osnove

Programski jezik često korišten u web developmentu. Inicijalno je bio namijenjen kako bi učinio web stranice interaktivnijima. Međutim, danas se koristi i za izradu server-side aplikacija, desktop aplikacija, mobilnih aplikacija, itd.

## 1.1 Uvod

1. **Web stranice**: Zamislimo da je web stranica ljudsko tijelo.

   - **HTML** (Hypertext Markup Language) je kostur koji daje strukturu i podršku tijelu.
   - **CSS** (Cascading Style Sheets) je koža koja izgled tijelu.
   - **JavaScript** je skupina mišića i tetiva koji omogućuju kretanje tijela.

2. **Interaktivnost**: S JavaScriptom možemo izrađivati interaktivne komponente web stranice, poput:

   - formi koje reagiraju kada ih ispunjavamo,
   - izbornika koji se "spušta" kada kliknemo na njega ili
   - animacije koja se pokreće kada joj se približimo mišem.

3. **Running everywhere!**: Danas se JavaScript izvodi u raznim okruženjima, ne samo u web pregledniku! Može se izvoditi na:

   - serveru tj. poslužitelju
   - desktop aplikacijama
   - mobilnim uređajima

4. **Easy to learn, Hard to Master**: JavaScript je jedan od jednostavnijih jezika za naučiti. Ima jednostavnu sintaksu i rezultate izvođenja koda mođemo vidjeti gotovo odmah u web pregledniku.

5. **Bogat community**: JavaScript je jedan od najpopularnijih programskih jezika na svijetu. Ima veliku zajednicu developera, odlično je dokumentiran, ima puno biblioteka i razvojnih okruženja koja nam olakšavaju izradu aplikacija.

## 1.2 Gdje pisati JavaScript kod?

Pisanje JavaScripta na client-sideu (u web pregledniku) možemo podijeliti na 3 načina:

1. **Inline JavaScript** - kod se piše direktno unutar HTML elementa, npr. u atributu `onclick`:

```html
<button onclick="console.log('Hello World!')">Hello World</button>
```

2. **Internal JavaScript** - kod se piše unutar HTML dokumenta, ali u odvojenom `<script>` elementu:

```html
<script>
  console.log("Hello World!");
</script>
```

3. **External JavaScript** - kod se piše u odvojenom JavaScript dokumentu, npr. `script.js`:

```html
<!--index.html-->
<!DOCTYPE html>
<html>
  <head>
    <title>My Web Page</title>
    <script src="script.js"></script>
  </head>
  <body>
    <h1>Welcome to My Web Page</h1>

    <button onclick="showMessage()">Click Me!</button>
  </body>
</html>
```

- Prednost ovog načina je što možemo koristiti isti kod na više stranica, a i sam HTML dokument je čišći i pregledniji.
- Na isti način kao u kodu iznad, `script.js` datoteku možemo uključiti i u druge HTML dokumente.

```javascript
// script.js
function showMessage() {
  console.log("Hello World!");
}
```

## 1.3 Gdje je taj "Hello World"?

Kada otvorimo HTML dokument u web pregledniku, možemo otvoriti konzolu (F12) i vidjeti poruku "Hello World!", tako jednostavno!

![Hello World](screenshots/hello_world.png)

Idemo sada izmjeniti tekst koji nam ispisuje funkcija `showMessage()`. U `script.js` datoteci promijenimo tekst u `Hello JavaScript!`:

```javascript
// script.js
function showMessage() {
  console.log("Hello JavaScript!");
}
```

Možemo primjetiti da se ponovnim klikom na gumb tekst u konzoli nije promijenio. To je zato što je kod iz `script.js` datoteke izvršen samo jednom, prilikom učitavanja stranice. Da bi se promjena vidjela, moramo osvježiti stranicu (F5).

Naporno je svaki put osvježavati stranicu da bi vidjeli naše promjene. Iz tog razloga ćemo preuzeti [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) ekstenziju za Visual Studio Code. Ona će nam omogućiti da otvorimo HTML dokument u web pregledniku i da se svaka promjena u kodu automatski osvježi u web pregledniku. Nakon što instaliramo ekstenziju, kliknemo desnim klikom na HTML dokument i odaberemo `Open with Live Server`.
![Live server](screenshots/live_server.png)

## 2. Varijable, tipovi podataka i operatori

Varijable su mjesta u memoriji u koje spremamo podatke. Svaka varijabla ima svoje ime i vrijednost. Vrijednost varijable može se mijenjati tijekom izvođenja programa.
Varijable možemo deklarirati na 3 načina: `var`, `let` i `const`. Varijable deklarirane sa ključnim riječima `var` i `let` su varijable koje se mogu mijenjati, dok je `const` konstanta koja se ne može mijenjati.
U pravilu koristimo `const` za deklariranje varijabli, osim ako znamo da će se vrijednost varijable mijenjati, tada koristimo `let`. `var` ne koristimo, osim

```javascript
let x = 5;
console.log(x); // 5

x = 10;
console.log(x); // 10

const y = 15;
console.log(y); // 15

y = 20; // TypeError: Assignment to constant variable.
console.log(y);
```

## 2.1 Tipovi podataka

JavaScript je dinamički tipizirani jezik, što znači da ne moramo eksplicitno navoditi tip podatka varijable. Tip podatka varijable određuje se automatski prilikom dodjele vrijednosti varijabli.  
Za provjeru tipa podatka varijable koristimo `typeof` operator.

```javascript
let a = 5; // number
let b = "5"; // string
let c = true; // boolean

console.log(typeof a); // number
console.log(typeof b); // string
console.log(typeof c); // boolean
```

## 2.2 Operatori

Operatori su simboli koji se koriste za izvođenje operacija nad podacima. Ovisno o funkcionalnostima, operatori se mogu podijeliti u sljedeće kategorije:

- **Aritmetički operatori** - koriste se za izvođenje aritmetičkih operacija nad brojevima (npr. zbrajanje `+`, oduzimanje `-`, množenje `*`, dijeljenje `/`, ostatak pri dijeljenju `%`, increment `++`, decrement `-`, eksponiranje `**`)
- **Operatori pridruživanja** - koriste se za pridruživanje vrijednosti varijabli (npr. assignment `=`, Addition assignment `+=`, Subtraction assignment `-=`, Multiplication assignment `*=`, Division assignment `/=`, Remainder assignment `%=`, Exponentiation assignment `**==`)
- **Operatori usporedbe** - koriste se za usporedbu vrijednosti (npr. equal `==`, not equal `!=`, strict equal `===`, strict not equal `!==`, greater than `>`, greater than or equal `>=`, less than `<`, less than or equal `<=`)
- **Logički operatori** - koriste se za izvođenje logičkih operacija (npr. logical AND `&&`, logical OR `||`, logical NOT `!`)
- **Operatori tipa** - koriste se za provjeru tipa podatka (npr. `typeof` - vraća string tipa podatka, `instanceof` - vraća boolean ovisno o tome je li objekt danog tipa)

```javascript
const a = 5;
const b = 10;

console.log(a + b); // 15

// Vrijede ista pravila kao i u matematici o prioritetu izvođenja operacija

console.log(a + b * 2); // 25
console.log((a + b) * 2); // 30

let c = 5;
c += 10;
console.log(c); // 15

console.log(a == b); // false
console.log(a != b); // true

const ocjena = "5";
console.log(ocjena == 5); // true
console.log(ocjena === 5); // false
ocjena = 4; // TypeError: Assignment to constant variable.

let x = 100 + 50;
console.log(x); // 150

// Ili možemo koristiti varijable
x = a + b;

// Pa i izraze
x = (100 + 50) * a;
console.log(x); // 750

// Increment
x++;
console.log(x); // 751

// Decrement
x--;
console.log(x); // 750

// Remainder
x = 5 % 2;
console.log(x); // 1

// Exponentiation
x = 5 ** 2;
console.log(x); // 25

// Logical AND
console.log(true && true); // true

// Logical OR
console.log(true || false); // true

// Logical NOT
console.log(!true); // false
```

### 2.2.1 Konstante i blokovski opseg

Varijable definirane sa `const`:

- ne mogu se ponovno deklarirati (**redeclare**)
- ne mogu se ponovno dodijeliti (**reassign**)
- moraju se inicijalizirati prilikom deklaracije (**initialize**)
- imaju blokovski opseg (**block scope**)

### Konstante se ne mogu ponovno deklarirati

```javascript
const PI = 3.141592653589793;
PI = 3.14; // Baca grešku!
PI = PI + 10; // Baca grešku!
```

### Konstante se moraju inicijalizirati prilikom deklaracije

```javascript
const PI = 3.141592653589793; // Točno!

const PI; // Netočno!
```

### Konstante imaju blokovski opseg

Deklariranje varijable sa `const` unutar bloka koda, stvara lokalnu varijablu koja se može koristiti samo unutar bloka koda, slično kao i varijable deklarirane sa `let`.

```javascript
const x = 10;
//Ovdje je x = 10
{
  const x = 2;
  //Ovdje je x = 2
}
//Ovdje je x = 10
```

Redeklariranje varijable sa `var` **dozvoljeno je** bilo gdje u programu, čak i izvan bloka koda:

```javascript
var x = 2;
console.log(x); //2
var x = 3;
console.log(x); //3

x = 4;
console.log(4); //4

{
  var x = 5;
  console.log(x); //5
}
```

Redeclare postojeće `let` ili `var` varijable u `const` nije dozvoljeno unutar bloka koda, ali je **dozvoljeno izvan** bloka koda:

```javascript
var x = 2; // Dozvoljeno
const x = 2; // Nije dozvoljeno

{
  let x = 2; // Dozvoljeno
  const x = 2; // Nije dozvoljeno
}

{
  const x = 2; // Dozvoljeno
  const x = 2; // Nije dozvoljeno
}
```

Ali... redeclare varijable sa `const` u drugom bloku koda **je dozvoljeno**:

```javascript
const x = 2; // Dozvoljeno
{
  const x = 2; // Dozvoljeno
}
{
  const x = 2; // Dozvoljeno
}
```

### 2.2.2 Typeof operator

**Primitivni tipovi** podataka u JavaScriptu predstavljaju vrijednosti koje se spremaju u memoriju bez dodatnih metoda i svojstava. Primitivni tipovi su:

- `string`
- `number`
- `boolean`
- `undefined`

`typeof` operator može vratiti jedan od tih primitivnih tipova.

```javascript
// typeof
console.log(typeof 5); // number
console.log(typeof "5"); // string
console.log(typeof true); // boolean
console.log(typeof undefined); // undefined
console.log(typeof null); // object
```

Zašto je typeof null objekt? U JavaScriptu, `null` doslovno predstavlja "ništa". Nažalost, JavaScript će vratiti da je tip podatka `null` objekt. Radi se o bugu koji je prisutan od samih početaka JavaScripta.

Kojeg će tipa biti sljedeća varijabla?

```javascript
const secret_number;
```

Odgovor je `undefined`. `undefined` je tip podatka koji se koristi kada varijabla nije inicijalizirana, dok je `null` je tip podatka koji se koristi kada varijabla nema vrijednost.

## Vježba 1

Idemo napraviti kratku vježbu onoga što smo dosad prošli. U `script.js` datoteci deklarirajte varijable `a`, `b` i `c` i dodijelite im vrijednosti `5`, `"5"` i true. Ispišite vrijednosti varijabli u konzolu i provjerite njihove tipove. Kod dodajte unutar funkcije `showMessage()`.  
Nakon toga, `typeof` operatorom provjerite tipove varijabli i u konzolu ispišite tvrdnju za svaku varijablu, npr. "Varijabla a je tipa number". Izraze u `console.log()` možete spojiti pomoću `+` operatora.

Rezultat:  
![vjezba_1](screenshots/vjezba1.png)

## Vježba 2

Idemo sada napraviti jednostavan kalkulator. U `script.js` datoteci deklarirajte varijable `a` i `b` i dodijelite im vrijednosti `5` i `10`. Izračunajte zbroj, razliku, umnožak i količnik varijabli `a` i `b` i ispišite ih u konzolu.
Dodatno, ispišite u konzolu ostatak pri dijeljenju varijabli `a` i `b` i rezultat eksponiranja varijable `a` na potenciju varijable `b`.

Rezultat:  
![vjezba_2](screenshots/vjezba2.png)

## 2.3 Koncept varijable u JavaScriptu

Varijable u JavaScriptu mogu sadržavati bilo koju vrijednost, neovisno o tipu podatka. To znači da varijabla može sadržavati broj, string, boolean, objekt, funkciju, itd.  
Ista varijabla može sadržavati i više različitih tipova podataka!
Važno je razumijeti što se dešava "ispod haube" kada deklariramo varijablu i dodijelimo joj vrijednost.
Bez tipova podataka, računalo neće sigurno znati interpretirati sljedeće:

```javascript
let x = 16 + "Volvo";
```

Ima li smisla? Hoće li ovo biti broj ili string? Ili ćemo dobiti grešku?
Kada JavaScript vidi da se koristi operator `+` na broju i stringu, on će automatski pretvoriti broj u string i spojiti ih. Ovo se zove **implicitna konverzija**.

```javascript
let x = "16" + "Volvo";
```

Uzmimo za primjer sljedeći izraz?

```javascript
let x = 16 + 4 + "Volvo";
```

Koji će biti rezultat? `"164Volvo"` ili `"20Volvo"`?

A ovdje?

```javascript
let x = "Volvo" + 16 + 4;
```

<details>
  <summary>Spoiler Warning!</summary>
  <p>U prvom primjeru, JavaScript tretira 16 i 4 kao brojeve, dok ne dođe do "Volvo", rezultat će biti "20Volvo".  </p>
  <p>U drugom primjeru, budući da je prvi operand string, JavaScript će sve operande tretirati kao stringove, rezultat će biti "Volvo164".</p>
  
  ```javascript
  let x = 16 + 4 + "Volvo";
  console.log(x); // 20Volvo

let x = "Volvo" + 16 + 4;
console.log(x); // Volvo164

````
</details>


<hr>
JavaScript tipovi su dinamički, što znači da se tip podatka varijable može promijeniti tijekom izvođenja programa.

```javascript
let x;
console.log(typeof x); // undefined
x = 5;
console.log(typeof x); // number
x = "Petar";
console.log(typeof x); // string
```

### 2.3.1 JavaScript Strings

String je tekstualni podatak, radi se o nizu znakova. String možemo definirati sa jednostrukim ili dvostrukim navodnicima.

```javascript
let x = "Petar";
let y = 'Petar';
```

Možemo koristiti i navodne znakove unutar stringa, ali moramo paziti da se ne podudaraju s vanjskim navodnicima.

```javascript
let x = "Petar je rekao: 'Dobar dan!'";
```

Možemo koristiti i varijable unutar stringa, ali onda moramo koristiti backtickse ``. Ovo se zove **template literals**.

```javascript
let ime = "Petar";
let predstavljanje = `Moje ime je ${ime}`;
console.log(predstavljanje); // Moje ime je Petar
```

Istu stvar možemo dobiti i sa `+` operatorom, ali ovaj princip je točan i puno čitljiviji!

```javascript
let ime = "Petar";
let predstavljanje1 = "Moje ime je " + ime;
let predstavljanje2 = `Moje ime je ${ime}`;

console.log(predstavljanje1 == predstavljanje2); // true
```

### 2.3.2 Eksponencijalna (znanstvena) notacija

Eksponencijalna notacija se koristi za prikazivanje jako velikih ili jako malih brojeva. Zapisujemo ju koristeći `e` ili `E`.

```javascript
let y = 123e5; // 12300000
let z = 123e-5; // 0.00123
```

**Random Fact**, ali nije loše za zapamtiti:
Većina programskih jezika ima različite tipove podataka za:

1. Cijele brojeve

- byte (8-bit)
- short (16-bit)
- int (32-bit)
- long (64-bit)

2. Brojeve s decimalnim zarezom

- float (32-bit)
- double (64-bit)

**Svi Javascript brojevi su uvijek istog tipa!** A to je `double` (64-bit floating point).

JavaScript, sa ES2020 standardom, dobiva novi tip podataka `BigInt` koji može prikazati brojeve veće od `Number.MAX_SAFE_INTEGER`, odnosno (2<sup>53</sup> - 1).

```javascript
const x = Number.MAX_SAFE_INTEGER + 1;
const y = Number.MAX_SAFE_INTEGER + 2;

console.log(Number.MAX_SAFE_INTEGER);
// Očekivani output: 9007199254740991

console.log(x);
// Očekivani output: 9007199254740992

console.log(x === y);
// Očekivani output: true
// x i y su isti brojevi jer ne možemo premašiti MAX_SAFE_INTEGER

// Koristimo BigInt
const z = BigInt(Number.MAX_SAFE_INTEGER) + BigInt(2);
console.log(z == y); // false
```

## Vježba 3

Deklarirajte dvije varijable `ime` i `prezime` i dodijelite im vrijednosti `Marko` i `Marić`. Ispišite dvaput u konzolu rečenicu `Moje ime je Marko Marić.`, jednom koristeći `+` operator, a drugi put koristeći `template literals`.

Rezultat:

![vjezba3](screenshots/vjezba3.png)

## Vježba 4

Pohranite u varijablu `cijenaProizvoda` vrijednost 5e3, u drugu varijablu `valuta` pohranite vrijednost "EUR".
U konzolu ispišite rečenicu `Cijena proizvoda je 5000 EUR.` koristeći `template literals`.
Napomena, vrijednost u eksponencijalnom zapisu možete pretvoriti u broj koristeći `Number()` funkciju.

Rezultat:

![vjezba4](screenshots/vjezba4.png)
